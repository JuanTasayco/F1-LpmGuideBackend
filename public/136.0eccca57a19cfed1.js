"use strict";(self.webpackChunk_06_lpmWeb=self.webpackChunk_06_lpmWeb||[]).push([[136],{7136:(L,d,a)=>{a.r(d),a.d(d,{AuthModule:()=>S});var i=a(1180),g=a(6895),c=a(7866),t=a(433),e=a(8256),p=a(9666),f=a(1955);function Z(o,s){if(1&o&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorEmail,"")}}function h(o,s){if(1&o&&(e.TgZ(0,"span",27),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPassword,"")}}let v=(()=>{class o{ngOnInit(){this.formLogin=this.formBuilder.group({email:["",[t.kI.required,t.kI.pattern(this.emailRegularExpresion)]],password:["",[t.kI.required,t.kI.minLength(3)]]})}get errorEmail(){const r=this.formLogin.get("email")?.errors;return r?.required?"Email es obligatorio":r?.pattern?"El formato del email es incorrecto":""}get errorPassword(){const r=this.formLogin.get("password")?.errors;return r?.required?"Password es obligatorio":r?.minlength?"Debe haber un m\xednimo de 3 car\xe1cteres":""}detectErrors(r){return this.formLogin.get(r)?.invalid&&this.formLogin.get(r)?.touched}login(){this.formLogin.valid?this.userService.loginUser(this.formLogin.value).subscribe(r=>{"boolean"==typeof r?this.route.navigateByUrl("/admin/usuarios"):this.SwalService.errorMessage(r)}):(this.SwalService.formularyNotValid(),this.formLogin.markAllAsTouched())}constructor(r,n,l,u){(0,i.Z)(this,"formBuilder",void 0),(0,i.Z)(this,"userService",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"SwalService",void 0),(0,i.Z)(this,"emailRegularExpresion","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),(0,i.Z)(this,"formLogin",void 0),this.formBuilder=r,this.userService=n,this.route=l,this.SwalService=u}}return(0,i.Z)(o,"\u0275fac",function(r){return new(r||o)(e.Y36(t.qu),e.Y36(p.K),e.Y36(c.F0),e.Y36(f.s))}),(0,i.Z)(o,"\u0275cmp",e.Xpm({type:o,selectors:[["app-login"]],decls:37,vars:3,consts:[[1,"Login","container-fluid"],[1,"Login-row","row","h-100","m-0","p-0"],[1,"Login-section","d-none","d-xl-block","col-xl-3","col-xxl-4"],[1,"Login-section","col-12","col-xl-4","col-xxl-3","px-5","my-auto"],["action","",1,"Login-form",3,"formGroup","ngSubmit"],[1,"Login-contImg","text-center","pb-5"],["src","assets/logo.jpg","alt","",1,"Login-logo","my-2","img-fluid"],[1,"Login-descriptions","mb-5"],[1,"Login-h2","fw-bold"],[1,"Login-group","mb-3"],["for","email",1,"form-label"],["type","text","id","email","formControlName","email",1,"form-control","form-control-lg"],["class","form-text text-danger",4,"ngIf"],[1,"Login-group"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control","form-control-lg"],[1,"row","Login-row","m-0","p-0","mt-4"],[1,"Login-col","col-md-6"],[1,"form-check"],["type","checkbox","value","","id","check",1,"form-check-input"],["for","","for","check",1,"form-check-label"],[1,"lead","fs-6"],["routerLink","/auth/register",1,"text-decoration-none"],[1,"d-flex","mt-3"],["type","submit",1,"Login-button","btn","btn-danger","py-3","w-100"],[1,"Login-section","d-none","d-xl-block","col-xl-5"],["src","assets/loginBg.jpg","alt","",1,"Login-img"],[1,"form-text","text-danger"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return n.login()}),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"h2",8),e._uU(9,"Iniciar Sesi\xf3n"),e.qZA(),e.TgZ(10,"p"),e._uU(11,"Esta secci\xf3n solo es para administradores."),e.qZA()(),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"Correo Electr\xf3nico *"),e.qZA(),e._UZ(15,"input",11),e.YNc(16,Z,2,1,"span",12),e.qZA(),e.TgZ(17,"div",13)(18,"label",14),e._uU(19,"Contrase\xf1a *"),e.qZA(),e._UZ(20,"input",15),e.YNc(21,h,2,1,"span",12),e.qZA(),e.TgZ(22,"div",16)(23,"div",17)(24,"div",18),e._UZ(25,"input",19),e.TgZ(26,"label",20),e._uU(27,"Recu\xe9rdame"),e.qZA()()(),e.TgZ(28,"div",17)(29,"p",21)(30,"a",22),e._uU(31,"A\xfan no tienes una cuenta?"),e.qZA()()()(),e.TgZ(32,"div",23)(33,"button",24),e._uU(34," Ingresar "),e.qZA()()()(),e.TgZ(35,"div",25),e._UZ(36,"img",26),e.qZA()()()),2&r&&(e.xp6(4),e.Q6J("formGroup",n.formLogin),e.xp6(12),e.Q6J("ngIf",n.detectErrors("email")),e.xp6(5),e.Q6J("ngIf",n.detectErrors("password")))},dependencies:[g.O5,c.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],encapsulation:2})),o})(),x=(()=>{class o{camposIguales(r,n){return l=>{const u=l.get(r)?.value,m=l.get(n)?.value;return u!==m?(l.get(n)?.setErrors({noIguales:!0}),{noIguales:!0}):(l.get(n)?.setErrors(null),null)}}}return(0,i.Z)(o,"\u0275fac",function(r){return new(r||o)}),(0,i.Z)(o,"\u0275prov",e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})),o})();function b(o,s){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorUser,"")}}function w(o,s){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorApellido,"")}}function _(o,s){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorEmail,"")}}function A(o,s){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPassword,"")}}function T(o,s){if(1&o&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&o){const r=e.oxw();e.xp6(1),e.hij(" ",r.errorPasswordRepeat,"")}}const U=[{path:"",children:[{path:"login",component:v},{path:"register",component:(()=>{class o{ngOnInit(){this.formRegister=this.formBuilder.group({nombre:["",[t.kI.required]],apellido:["",[t.kI.required]],email:["",[t.kI.required,t.kI.pattern(this.emailRegularExpresion)]],roles:["user",t.kI.required],direccion:[""],pais:["Per\xfa"],ciudad:[""],password:["",[t.kI.required,t.kI.minLength(3)]],confirmPassword:["",[t.kI.required]]},{validators:[this.validatorService.camposIguales("password","confirmPassword")]})}send(){if(this.formRegister.valid){const{confirmPassword:r,...n}=this.formRegister.value;this.userService.createUser(n).subscribe(l=>{1==l?this.swalFire.createUserSuccess().then(()=>{this.route.navigate(["/auth/login"])}):this.swalFire.errorMessage(l)})}else this.formRegister.markAllAsTouched()}detectErrors(r){return this.formRegister.get(r)?.invalid&&this.formRegister.get(r)?.touched}get errorUser(){return this.formRegister.get("nombre")?.errors?.required?"El nombre es necesario":""}get errorApellido(){return this.formRegister.get("apellido")?.errors?.required?"El apellido es necesario":""}get errorEmail(){const r=this.formRegister.get("email")?.errors;return r?.required?"El email es necesario":r?.pattern?"El email no tiene el formato correcto":""}get errorPassword(){const r=this.formRegister.get("password")?.errors;return r?.required?"El password es necesario":r?.minlength?"El password debe tener al menos 3 caracteres":""}get errorPasswordRepeat(){const r=this.formRegister.get("confirmPassword")?.errors;return r?.required?"El campo no puede estar vac\xedo":r?.noIguales?"Las contrase\xf1as no coinciden":""}constructor(r,n,l,u,m){(0,i.Z)(this,"validatorService",void 0),(0,i.Z)(this,"formBuilder",void 0),(0,i.Z)(this,"userService",void 0),(0,i.Z)(this,"swalFire",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"emailRegularExpresion","^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$"),(0,i.Z)(this,"formRegister",void 0),this.validatorService=r,this.formBuilder=n,this.userService=l,this.swalFire=u,this.route=m}}return(0,i.Z)(o,"\u0275fac",function(r){return new(r||o)(e.Y36(x),e.Y36(t.qu),e.Y36(p.K),e.Y36(f.s),e.Y36(c.F0))}),(0,i.Z)(o,"\u0275cmp",e.Xpm({type:o,selectors:[["app-register"]],decls:56,vars:6,consts:[[1,"Sign","container-fluid","h-100"],[1,"Sign-row","row","h-100","m-0","p-0"],[1,"Sign-section","d-none","d-xl-block","col-xl-3","col-xxl-4"],[1,"Sign-section","col-12","col-xl-4","col-xxl-3","px-5","my-auto"],["action","",1,"Sign-form","row",3,"formGroup","ngSubmit"],[1,"Sign-contImg","text-center","pb-5"],["src","assets/logo.jpg","alt","",1,"Login-logo","my-2"],[1,"Sign-descriptions","mb-5"],[1,"Sign-h2","fw-bold"],[1,"Sign-group","mb-3","col-md-6"],["for","nombre",1,"form-label"],["type","text","formControlName","nombre",1,"form-control","form-control-lg"],["class","form-text text-danger",4,"ngIf"],["for","apellido",1,"form-label"],["type","text","formControlName","apellido",1,"form-control","form-control-lg"],[1,"Sign-group","mb-3"],["for","email",1,"form-label"],["type","text","formControlName","email",1,"form-control","form-control-lg"],["for","direccion",1,"form-label"],["type","text","formControlName","direccion",1,"form-control","form-control-lg"],[1,"Sign-group"],["for","password",1,"form-label"],["type","password","formControlName","password",1,"form-control","form-control-lg"],["for","repeat-password",1,"form-label"],["type","password","formControlName","confirmPassword",1,"form-control","form-control-lg"],[1,"row","Sign-row","m-0","p-0","mt-4"],[1,"Sign-col","col-md-6"],[1,"form-check"],["type","checkbox","value","","id","check",1,"form-check-input"],["for","","for","check",1,"form-check-label"],[1,"lead","fs-6"],["routerLink","/auth/login",1,"text-decoration-none"],[1,"d-flex","mt-3"],["type","submit",1,"Sign-button","btn","btn-danger","py-3","w-100"],[1,"Sign-section","d-none","d-xl-block","col-xl-5"],["src","assets/loginBg.jpg","alt","",1,"Sign-img"],[1,"form-text","text-danger"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"div",2),e.TgZ(3,"div",3)(4,"form",4),e.NdJ("ngSubmit",function(){return n.send()}),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"h2",8),e._uU(9,"Registrate"),e.qZA(),e.TgZ(10,"p"),e._uU(11,"Nos gustar\xeda tenerte como aliado"),e.qZA()(),e.TgZ(12,"div",9)(13,"label",10),e._uU(14,"Nombre*"),e.qZA(),e._UZ(15,"input",11),e.YNc(16,b,2,1,"span",12),e.qZA(),e.TgZ(17,"div",9)(18,"label",13),e._uU(19,"Apellido*"),e.qZA(),e._UZ(20,"input",14),e.YNc(21,w,2,1,"span",12),e.qZA(),e.TgZ(22,"div",15)(23,"label",16),e._uU(24,"Correo Electr\xf3nico *"),e.qZA(),e._UZ(25,"input",17),e.YNc(26,_,2,1,"span",12),e.qZA(),e.TgZ(27,"div",15)(28,"label",18),e._uU(29,"Direcci\xf3n"),e.qZA(),e._UZ(30,"input",19),e.qZA(),e.TgZ(31,"div",20)(32,"label",21),e._uU(33,"Contrase\xf1a *"),e.qZA(),e._UZ(34,"input",22),e.YNc(35,A,2,1,"span",12),e.qZA(),e.TgZ(36,"div",20)(37,"label",23),e._uU(38,"Confirmar contrase\xf1a*"),e.qZA(),e._UZ(39,"input",24),e.YNc(40,T,2,1,"span",12),e.qZA(),e.TgZ(41,"div",25)(42,"div",26)(43,"div",27),e._UZ(44,"input",28),e.TgZ(45,"label",29),e._uU(46,"Recu\xe9rdame"),e.qZA()()(),e.TgZ(47,"div",26)(48,"p",30)(49,"a",31),e._uU(50,"Ya tienes una cuenta? "),e.qZA()()()(),e.TgZ(51,"div",32)(52,"button",33),e._uU(53," Registrarte "),e.qZA()()()(),e.TgZ(54,"div",34),e._UZ(55,"img",35),e.qZA()()()),2&r&&(e.xp6(4),e.Q6J("formGroup",n.formRegister),e.xp6(12),e.Q6J("ngIf",n.detectErrors("nombre")),e.xp6(5),e.Q6J("ngIf",n.detectErrors("apellido")),e.xp6(5),e.Q6J("ngIf",n.detectErrors("email")),e.xp6(9),e.Q6J("ngIf",n.detectErrors("password")),e.xp6(5),e.Q6J("ngIf",n.detectErrors("confirmPassword")))},dependencies:[g.O5,c.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u],encapsulation:2})),o})()},{path:"**",redirectTo:"register"}]}];let q=(()=>{class o{}return(0,i.Z)(o,"\u0275fac",function(r){return new(r||o)}),(0,i.Z)(o,"\u0275mod",e.oAB({type:o})),(0,i.Z)(o,"\u0275inj",e.cJS({imports:[c.Bz.forChild(U),c.Bz]})),o})(),S=(()=>{class o{}return(0,i.Z)(o,"\u0275fac",function(r){return new(r||o)}),(0,i.Z)(o,"\u0275mod",e.oAB({type:o})),(0,i.Z)(o,"\u0275inj",e.cJS({imports:[g.ez,q,t.UX]})),o})()}}]);